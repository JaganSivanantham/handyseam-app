<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Create Invoice</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

<nav class="sidebar">
    <div class="brand">HandySeam</div>
    <div class="sidebar-menu">
        <a href="/dashboard" class="menu-item">Dashboard</a>
        <a href="/orders/create" class="menu-item active">Create New Order</a>
        <a href="/orders" class="menu-item">View Orders</a>
        <a href="/customers" class="menu-item">Customers</a>
    </div>
</nav>

<main class="main-content">
    <div class="card">
        <div class="card-header" style="background-color: #2c2440; color: white; padding: 15px; margin: -25px -25px 20px -25px;">
            <h3>Create Invoice</h3>
        </div>

        <div style="display: flex; gap: 30px;">
            <div style="flex: 1;">
                <form th:action="@{/orders/confirmOrder}" method="POST">
                    <div class="form-group">
                        <label>Customer</label>
                        <input type="text" th:value="${currentOrder.customer.name}" disabled style="background-color: #f9f9f9;">
                    </div>
                    <div class="form-group">
                        <label>Date</label>
                        <input type="text" th:value="${#temporals.format(currentOrder.orderDate, 'yyyy-MM-dd')}" disabled>
                    </div>
                    <div class="form-group">
                        <label>Total Amount (â‚¹)</label>
                        <input type="text" th:value="${currentOrder.totalAmount}" disabled style="background-color: #e8f5e9; font-weight: bold; color: #2e7d32;">
                    </div>
                    <div class="form-group">
                        <label>Expected Fitting Date</label>
                        <input type="date" name="expectedDate" required>
                    </div>
                    <button type="submit" class="btn-primary">SUBMIT & GENERATE INVOICE</button>
                </form>
            </div>

            <div style="flex: 1; border-left: 1px solid #eee; padding-left: 20px;">
                <h4 style="margin-bottom: 15px;">Order Summary</h4>
                <table class="data-table">
                    <thead>
                    <tr>
                        <th>Style</th>
                        <th>Qty</th>
                        <th>Price</th>
                        <th>Total</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="item : ${currentOrder.items}">
                        <td th:text="${item.styleName}"></td>
                        <td th:text="${item.quantity}"></td>
                        <td th:text="${item.price}"></td>
                        <td th:text="${item.price * item.quantity}"></td>
                    </tr>
                    <tr th:if="${#lists.isEmpty(currentOrder.items)}">
                        <td colspan="4" style="text-align:center; color: #999;">No items added yet.</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</main>
</body>
</html>